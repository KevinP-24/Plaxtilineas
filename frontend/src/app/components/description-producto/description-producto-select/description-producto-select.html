<div class="description-producto-container">
  
  <!-- Estado de carga -->
  <div *ngIf="cargando" class="loading-container">
    <div class="loading-spinner"></div>
    <p class="loading-text">Cargando detalles del producto...</p>
  </div>

  <!-- Estado de error -->
  <div *ngIf="error && !cargando" class="error-container">
    <div class="error-icon">‚ö†Ô∏è</div>
    <h2 class="error-title">Producto no encontrado</h2>
    <p class="error-message">El producto que buscas no existe o no est√° disponible.</p>
    <button class="error-button" (click)="volverAProductos()">
      Volver a productos
    </button>
  </div>

  <!-- Detalles del producto -->
  <div *ngIf="producto && !cargando && !error" class="producto-detalles">
    
    <!-- Breadcrumb de navegaci√≥n -->
    <nav class="breadcrumb">
      <a routerLink="/productos" class="breadcrumb-link">Productos</a>
      <span class="breadcrumb-separator">‚Ä∫</span>
      <span class="breadcrumb-current">{{producto.nombre}}</span>
    </nav>

    <!-- Contenedor principal -->
    <div class="producto-grid">
      
      <!-- Columna izquierda: Imagen -->
      <div class="producto-imagen-col">
        <div class="producto-imagen-container">
          <img 
            [src]="producto.imagen_url" 
            [alt]="producto.nombre" 
            class="producto-imagen"
            (error)="producto.imagen_url = 'assets/images/producto-default.jpg'">
          <div class="imagen-overlay"></div>
        </div>
      </div>

      <!-- Columna derecha: Informaci√≥n -->
      <div class="producto-info-col">
        
        <!-- Encabezado -->
        <div class="producto-header">
          <div class="producto-categorias">
            <span class="categoria-badge">{{producto.categoria}}</span>
            <span class="subcategoria-badge">{{producto.subcategoria}}</span>
          </div>
          <h1 class="producto-nombre">{{productoBaseNombre}}</h1>
          <div class="producto-meta">
            <span class="producto-id">ID: {{producto.id}}</span>
          </div>
        </div>

        <!-- Selecci√≥n de opciones -->
        <div *ngIf="opcionesProducto.length > 0" class="opciones-container">
          <h3 class="section-title">Seleccionar tipo</h3>
          <div class="opciones-grid">
            <div 
              *ngFor="let opcion of opcionesProducto" 
              class="opcion-item"
              [class.opcion-seleccionada]="opcionSeleccionada === opcion"
              (click)="seleccionarOpcion(opcion)">
              <div class="opcion-contenido">
                <span class="opcion-texto">{{opcion}}</span>
                <div class="opcion-checkbox">
                  <div class="opcion-checkmark" *ngIf="opcionSeleccionada === opcion">‚úì</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Precio actualizado por opci√≥n (si aplica) -->
          <div *ngIf="precioPorOpcion[opcionSeleccionada]" class="precio-opcion">
            <span class="precio-opcion-label">Precio seleccionado:</span>
            <span class="precio-opcion-valor">${{formatearPrecio(precioPorOpcion[opcionSeleccionada])}}</span>
          </div>
        </div>

        <!-- Descripci√≥n -->
        <div class="producto-descripcion-section">
          <h3 class="section-title">Descripci√≥n</h3>
          <p class="producto-descripcion">
            {{descripcionBase || 'Descripci√≥n no disponible'}}
          </p>
        </div>

        <!-- Detalles espec√≠ficos -->
        <div class="producto-detalles-section">
          <h3 class="section-title">Detalles del producto</h3>
          <div class="detalles-grid">
            <div class="detalle-item">
              <span class="detalle-label">Subcategor√≠a:</span>
              <span class="detalle-valor">{{producto.subcategoria}}</span>
            </div>
            <div class="detalle-item">
              <span class="detalle-label">Categor√≠a:</span>
              <span class="detalle-valor">{{producto.categoria}}</span>
            </div>
            <div class="detalle-item" *ngIf="opcionSeleccionada">
              <span class="detalle-label">Tipo seleccionado:</span>
              <span class="detalle-valor">{{opcionSeleccionada}}</span>
            </div>
          </div>
        </div>

        <!-- Precio y acciones -->
        <div class="producto-acciones-section">
          <div class="precio-container">
            <span class="precio-label">Precio:</span>
            <div class="precio-valor">
              <span class="precio-simbolo">$</span>
              <span class="precio-numero">{{formatearPrecio(precioActual)}}</span>
            </div>
          </div>

          <div class="acciones-container">
            <!-- Bot√≥n de WhatsApp para consultar sobre el producto -->
            <a [href]="generarWhatsAppLink()"
               target="_blank"
               rel="noopener noreferrer nofollow"
               class="btn-whatsapp"
               aria-label="Consultar sobre este producto por WhatsApp"
               title="Consultar sobre este producto por WhatsApp">
              <span class="btn-icon">üí¨</span>
              <span class="btn-text">Consultar por WhatsApp</span>
            </a>
            
            <button class="btn-volver" (click)="volverAProductos()">
              <span class="btn-icon">‚Üê</span>
              <span class="btn-text">Volver a productos</span>
            </button>
          </div>

          <div class="acciones-secundarias">
            <button class="btn-secundario" (click)="verMasDeEstaCategoria()" *ngIf="producto.categoria">
              Ver m√°s productos de {{producto.categoria}}
            </button>
            
            <div class="compartir-container">
              <span class="compartir-label">Compartir:</span>
              <div class="compartir-botones">
                <button class="btn-compartir">üì±</button>
                <button class="btn-compartir">üìß</button>
                <button class="btn-compartir">üîó</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>